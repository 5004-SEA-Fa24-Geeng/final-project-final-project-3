


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > CharacterListPanel</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">view</a>
</div>

<h1>Coverage Summary for Class: CharacterListPanel (view)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">CharacterListPanel</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (11/11)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    37.5%
  </span>
  <span class="absValue">
    (12/32)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    88.3%
  </span>
  <span class="absValue">
    (128/145)
  </span>
</td>
</tr>
  <tr>
    <td class="name">CharacterListPanel$AddToWishListListener</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (11/11)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    37.5%
  </span>
  <span class="absValue">
    (12/32)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    88.3%
  </span>
  <span class="absValue">
    (128/145)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package view;
&nbsp;
&nbsp;import model.CharacterRecord;
&nbsp;import javax.swing.*;
&nbsp;import java.awt.*;
&nbsp;import java.util.List;
&nbsp;
&nbsp;import util.ImageCache;  // cache the images to reduce loading time
&nbsp;
&nbsp;/**
&nbsp; * The CharacterListPanel class is responsible for displaying a list of characters in a scrollable panel.
&nbsp; * It provides functionality to add characters to the wishlist and update the count of characters.
&nbsp; */
&nbsp;public class CharacterListPanel extends JPanel {
&nbsp;    /** Panel that holds the list of character panels. */
<b class="fc">&nbsp;    private final JPanel contentPanel = new JPanel();</b>
&nbsp;    /** Listener for handling &quot;add to wishlist&quot; actions. */
&nbsp;    private AddToWishListListener addToWishListListener;
&nbsp;    /** Panel used to display sorting controls and character count. */
&nbsp;    private SortPanel sortPanel;
&nbsp;
&nbsp;    /**
&nbsp;     * Constructs a CharacterListPanel with the given sort panel.
&nbsp;     * @param sortPanel the panel for sorting and displaying character count
&nbsp;     */
<b class="fc">&nbsp;    public CharacterListPanel(SortPanel sortPanel) {</b>
<b class="fc">&nbsp;        this.sortPanel = sortPanel;</b>
<b class="fc">&nbsp;        setLayout(new BorderLayout());</b>
<b class="fc">&nbsp;        setPreferredSize(new Dimension(400, 138));</b>
<b class="fc">&nbsp;        setMinimumSize(new Dimension(400, 138));</b>
<b class="fc">&nbsp;        setMaximumSize(new Dimension(400, 138));</b>
<b class="fc">&nbsp;        setBackground(new Color(255,240,247));</b>
<b class="fc">&nbsp;        initComponents();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the listener for adding characters to the wishlist.
&nbsp;     * @param listener the listener to set
&nbsp;     */
&nbsp;    public void setAddToWishListListener(AddToWishListListener listener) {
<b class="pc">&nbsp;        System.out.println(&quot;Setting addToWishListListener: &quot; + (listener != null));</b>
<b class="fc">&nbsp;        this.addToWishListListener = listener;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Checks if the addToWishListListener is set.
&nbsp;     * @return true if the listener is set, false otherwise
&nbsp;     */
&nbsp;    public boolean isAddToWishListListenerSet() {
<b class="pc">&nbsp;        return addToWishListListener != null;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Initializes the components of the panel.
&nbsp;     */
&nbsp;    private void initComponents() {
<b class="fc">&nbsp;        contentPanel.setLayout(new BoxLayout(contentPanel, BoxLayout.Y_AXIS));</b>
<b class="fc">&nbsp;        contentPanel.setBackground(new Color(255,240,247));</b>
<b class="fc">&nbsp;        JScrollPane scrollPane = new JScrollPane(contentPanel);</b>
<b class="fc">&nbsp;        add(scrollPane, BorderLayout.CENTER);</b>
<b class="fc">&nbsp;        scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);</b>
<b class="fc">&nbsp;        scrollPane.getViewport().setBackground(new Color(255,240,247)); // ✅ ADD THIS</b>
<b class="fc">&nbsp;        scrollPane.setBorder(BorderFactory.createLineBorder(new Color(204, 0, 102), 2));</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the list of characters to display in the panel.
&nbsp;     * @param characters the list of characters to display
&nbsp;     */
&nbsp;    public void setCharacterList(List&lt;CharacterRecord&gt; characters) {
<b class="fc">&nbsp;        contentPanel.removeAll();</b>
<b class="fc">&nbsp;        for (CharacterRecord character : characters) {</b>
<b class="fc">&nbsp;            addCharacterPanel(character);</b>
&nbsp;        }
<b class="fc">&nbsp;        contentPanel.revalidate();</b>
<b class="fc">&nbsp;        contentPanel.repaint();</b>
<b class="fc">&nbsp;        updateCount();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adds a character panel to the content panel.
&nbsp;     * @param character the character to add
&nbsp;     */
&nbsp;    private void addCharacterPanel(CharacterRecord character) {
<b class="fc">&nbsp;        JPanel panel = new JPanel(new BorderLayout(0, 0));</b>
<b class="fc">&nbsp;        panel.setBackground(new Color(255,240,247)); // ✅ to match</b>
<b class="fc">&nbsp;        panel.setBorder(BorderFactory.createEmptyBorder(2, 2, 2, 2));</b>
&nbsp;
&nbsp;        // left image panel
<b class="fc">&nbsp;        JPanel imagePanel = new JPanel(new FlowLayout(FlowLayout.LEFT, 0, 0));</b>
<b class="fc">&nbsp;        imagePanel.setBackground(new Color(255,240,247)); // ✅</b>
<b class="fc">&nbsp;        String imageUrl = &quot;https://image.tmdb.org/t/p/w92&quot; + character.getProfile();</b>
<b class="fc">&nbsp;        ImageIcon icon = ImageCache.getImage(imageUrl);</b>
<b class="pc">&nbsp;        if (icon != null) {</b>
<b class="nc">&nbsp;            imagePanel.add(new JLabel(icon));</b>
&nbsp;        } else {
<b class="fc">&nbsp;            imagePanel.add(new JLabel(&quot;No Image&quot;));</b>
&nbsp;        }
&nbsp;
&nbsp;        // middle info panel
<b class="fc">&nbsp;        JPanel infoPanel = new JPanel();</b>
<b class="fc">&nbsp;        infoPanel.setLayout(new BoxLayout(infoPanel, BoxLayout.Y_AXIS));</b>
<b class="fc">&nbsp;        infoPanel.setPreferredSize(new Dimension(200, 92));</b>
<b class="fc">&nbsp;        infoPanel.setMinimumSize(new Dimension(200, 92));</b>
<b class="fc">&nbsp;        infoPanel.setMaximumSize(new Dimension(200, 92));</b>
<b class="fc">&nbsp;        infoPanel.setBackground(Color.WHITE);</b>
<b class="fc">&nbsp;        infoPanel.setBorder(BorderFactory.createEmptyBorder(0, 10, 0, 0));</b>
&nbsp;        
<b class="fc">&nbsp;        JLabel nameLabel = new JLabel(&quot;Name: &quot; + character.getName());</b>
<b class="fc">&nbsp;        JLabel ageLabel = new JLabel(&quot;Age: &quot; + character.getAge());</b>
&nbsp;        
&nbsp;        // create gender label
<b class="fc">&nbsp;        JLabel genderLabel = new JLabel();</b>
<b class="fc">&nbsp;        String genderText = &quot;Gender: &quot; + getGenderString(character.getGender());</b>
<b class="fc">&nbsp;        ImageIcon genderIcon = null;</b>
&nbsp;        
&nbsp;        // set gender icon based on gender
<b class="pc">&nbsp;        switch (character.getGender()) {</b>
&nbsp;            case 1:
<b class="fc">&nbsp;                genderIcon = new ImageIcon(&quot;src/main/resources/female.png&quot;);</b>
&nbsp;                break;
&nbsp;            case 2:
<b class="fc">&nbsp;                genderIcon = new ImageIcon(&quot;src/main/resources/male.png&quot;);</b>
&nbsp;                break;
&nbsp;            case 3:
<b class="nc">&nbsp;                genderIcon = new ImageIcon(&quot;src/main/resources/other.png&quot;);</b>
&nbsp;                break;
&nbsp;        }
&nbsp;        
&nbsp;        // adjust icon size
<b class="pc">&nbsp;        if (genderIcon != null) {</b>
<b class="fc">&nbsp;            Image image = genderIcon.getImage();</b>
<b class="fc">&nbsp;            Image newimg = image.getScaledInstance(12, 12, Image.SCALE_SMOOTH);</b>
<b class="fc">&nbsp;            genderIcon = new ImageIcon(newimg);</b>
<b class="fc">&nbsp;            genderLabel.setIcon(genderIcon);</b>
&nbsp;        }
&nbsp;        
&nbsp;        // set text and icon position
<b class="fc">&nbsp;        genderLabel.setText(genderText);</b>
<b class="fc">&nbsp;        genderLabel.setHorizontalTextPosition(SwingConstants.LEFT);</b>
<b class="fc">&nbsp;        genderLabel.setIconTextGap(5); // icon and text gap</b>
&nbsp;        
<b class="fc">&nbsp;        JLabel zodiacLabel = new JLabel(&quot;&lt;html&gt;Zodiac: &quot; + getZodiacSign(character.getZodiacSign()) + &quot;&lt;/html&gt;&quot;);</b>
<b class="fc">&nbsp;        JLabel occupationLabel = new JLabel(&quot;Occupation: &quot; + character.getOccupation());</b>
&nbsp;        
&nbsp;        // set font size and alignment
<b class="fc">&nbsp;        Font labelFont = new Font(&quot;Arial&quot;, Font.PLAIN, 14);</b>
<b class="fc">&nbsp;        nameLabel.setFont(labelFont);</b>
<b class="fc">&nbsp;        ageLabel.setFont(labelFont);</b>
<b class="fc">&nbsp;        genderLabel.setFont(labelFont);</b>
<b class="fc">&nbsp;        zodiacLabel.setFont(labelFont);</b>
<b class="fc">&nbsp;        occupationLabel.setFont(labelFont);</b>
&nbsp;        
&nbsp;        // set alignment
<b class="fc">&nbsp;        nameLabel.setHorizontalAlignment(SwingConstants.LEFT);</b>
<b class="fc">&nbsp;        ageLabel.setHorizontalAlignment(SwingConstants.LEFT);</b>
<b class="fc">&nbsp;        genderLabel.setHorizontalAlignment(SwingConstants.LEFT);</b>
<b class="fc">&nbsp;        zodiacLabel.setHorizontalAlignment(SwingConstants.LEFT);</b>
<b class="fc">&nbsp;        occupationLabel.setHorizontalAlignment(SwingConstants.LEFT);</b>
&nbsp;        
&nbsp;        // set each label&#39;s fixed height
<b class="fc">&nbsp;        Dimension labelSize = new Dimension(200, 15);</b>
<b class="fc">&nbsp;        nameLabel.setPreferredSize(labelSize);</b>
<b class="fc">&nbsp;        ageLabel.setPreferredSize(labelSize);</b>
<b class="fc">&nbsp;        genderLabel.setPreferredSize(labelSize);</b>
<b class="fc">&nbsp;        zodiacLabel.setPreferredSize(labelSize);</b>
<b class="fc">&nbsp;        occupationLabel.setPreferredSize(labelSize);</b>
&nbsp;
&nbsp;        // set label margin
<b class="fc">&nbsp;        nameLabel.setBorder(BorderFactory.createEmptyBorder(10, 0, 10, 0));</b>
<b class="fc">&nbsp;        ageLabel.setBorder(BorderFactory.createEmptyBorder(1, 0, 10, 0));</b>
<b class="fc">&nbsp;        genderLabel.setBorder(BorderFactory.createEmptyBorder(1, 0, 10, 0));</b>
<b class="fc">&nbsp;        zodiacLabel.setBorder(BorderFactory.createEmptyBorder(1, 0, 10, 0));</b>
<b class="fc">&nbsp;        occupationLabel.setBorder(BorderFactory.createEmptyBorder(1, 0, 1, 0));</b>
&nbsp;        
<b class="fc">&nbsp;        infoPanel.add(nameLabel);</b>
<b class="fc">&nbsp;        infoPanel.add(ageLabel);</b>
<b class="fc">&nbsp;        infoPanel.add(genderLabel);</b>
<b class="fc">&nbsp;        infoPanel.add(zodiacLabel);</b>
<b class="fc">&nbsp;        infoPanel.add(occupationLabel);</b>
&nbsp;
&nbsp;        // right button panel
<b class="fc">&nbsp;        JPanel buttonPanel = new JPanel(new FlowLayout(FlowLayout.CENTER, 0, 10)); // Aligns top-ish</b>
<b class="fc">&nbsp;        buttonPanel.setPreferredSize(new Dimension(30, 92));</b>
<b class="fc">&nbsp;        buttonPanel.setMinimumSize(new Dimension(30, 92));</b>
<b class="fc">&nbsp;        buttonPanel.setMaximumSize(new Dimension(30, 92));</b>
<b class="fc">&nbsp;        buttonPanel.setBackground(Color.WHITE);</b>
&nbsp;
<b class="fc">&nbsp;        ImageIcon heartIcon = new ImageIcon(&quot;src/main/resources/heart.png&quot;);</b>
<b class="fc">&nbsp;        Image scaled = heartIcon.getImage().getScaledInstance(24, 24, Image.SCALE_SMOOTH);</b>
<b class="fc">&nbsp;        JButton addButton = new JButton(new ImageIcon(scaled));</b>
&nbsp;
<b class="fc">&nbsp;        addButton.setBorderPainted(false);</b>
<b class="fc">&nbsp;        addButton.setContentAreaFilled(false);</b>
<b class="fc">&nbsp;        addButton.setFocusPainted(false);</b>
<b class="fc">&nbsp;        addButton.setOpaque(true);</b>
<b class="fc">&nbsp;        addButton.setToolTipText(&quot;Add to Wishlist&quot;);</b>
<b class="fc">&nbsp;        addButton.setFont(new Font(&quot;Arial&quot;, Font.BOLD, 20));</b>
<b class="fc">&nbsp;        addButton.setPreferredSize(new Dimension(25, 25));</b>
<b class="fc">&nbsp;        addButton.setMargin(new Insets(0, 0, 0, 10));</b>
<b class="fc">&nbsp;        addButton.setFocusable(false);</b>
<b class="fc">&nbsp;        addButton.setBackground(Color.WHITE);</b>
<b class="fc">&nbsp;        addButton.setBorder(BorderFactory.createCompoundBorder(</b>
<b class="fc">&nbsp;                BorderFactory.createLineBorder(new Color(200, 200, 200)),</b>
<b class="fc">&nbsp;                BorderFactory.createEmptyBorder(0, 0, 0, 0)</b>
&nbsp;        ));
<b class="fc">&nbsp;        addButton.setCursor(new Cursor(Cursor.HAND_CURSOR));</b>
&nbsp;
<b class="fc">&nbsp;        addButton.addActionListener(e -&gt; {</b>
<b class="fc">&nbsp;            System.out.println(&quot;Button clicked for character: &quot; + character.getName());</b>
<b class="pc">&nbsp;            if (addToWishListListener != null) {</b>
<b class="fc">&nbsp;                System.out.println(&quot;Adding character with ID: &quot; + character.getId());</b>
<b class="fc">&nbsp;                addToWishListListener.onAdd(character.getId());</b>
&nbsp;            } else {
<b class="nc">&nbsp;                System.out.println(&quot;addToWishListListener is null&quot;);</b>
&nbsp;            }
&nbsp;        });
<b class="fc">&nbsp;        buttonPanel.add(addButton);</b>
&nbsp;
&nbsp;        // add panel to main panel
<b class="fc">&nbsp;        panel.add(imagePanel, BorderLayout.WEST);</b>
<b class="fc">&nbsp;        panel.add(infoPanel, BorderLayout.CENTER);</b>
<b class="fc">&nbsp;        panel.add(buttonPanel, BorderLayout.EAST);</b>
&nbsp;
&nbsp;        // add separator
<b class="fc">&nbsp;        panel.setBorder(BorderFactory.createMatteBorder(0, 0, 1, 0, Color.LIGHT_GRAY));</b>
&nbsp;
<b class="fc">&nbsp;        contentPanel.add(panel);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Gets the gender string for a given gender code.
&nbsp;     * @param gender the gender code
&nbsp;     * @return the gender string
&nbsp;     */
&nbsp;    private String getGenderString(int gender) {
<b class="pc">&nbsp;        switch (gender) {</b>
<b class="fc">&nbsp;            case 1: return &quot;Female&quot;;</b>
<b class="fc">&nbsp;            case 2: return &quot;Male&quot;;</b>
<b class="nc">&nbsp;            case 3: return &quot;Non-binary&quot;;</b>
<b class="nc">&nbsp;            default: return &quot;Unknown&quot;;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Gets the zodiac sign for a given zodiac sign.
&nbsp;     * @param zodiac the zodiac sign
&nbsp;     * @return the zodiac sign
&nbsp;     */
&nbsp;    private String getZodiacSign(String zodiac) {
<b class="pc">&nbsp;        switch (zodiac.toLowerCase()) {</b>
<b class="nc">&nbsp;            case &quot;aries&quot;: return &quot;♈ &quot; + zodiac;</b>
<b class="nc">&nbsp;            case &quot;taurus&quot;: return &quot;♉ &quot; + zodiac;</b>
<b class="nc">&nbsp;            case &quot;gemini&quot;: return &quot;♊ &quot; + zodiac;</b>
<b class="nc">&nbsp;            case &quot;cancer&quot;: return &quot;♋ &quot; + zodiac;</b>
<b class="nc">&nbsp;            case &quot;leo&quot;: return &quot;♌ &quot; + zodiac;</b>
<b class="nc">&nbsp;            case &quot;virgo&quot;: return &quot;♍ &quot; + zodiac;</b>
<b class="nc">&nbsp;            case &quot;libra&quot;: return &quot;♎ &quot; + zodiac;</b>
<b class="nc">&nbsp;            case &quot;scorpio&quot;: return &quot;♏ &quot; + zodiac;</b>
<b class="nc">&nbsp;            case &quot;sagittarius&quot;: return &quot;♐ &quot; + zodiac;</b>
<b class="nc">&nbsp;            case &quot;capricorn&quot;: return &quot;♑ &quot; + zodiac;</b>
<b class="nc">&nbsp;            case &quot;aquarius&quot;: return &quot;♒ &quot; + zodiac;</b>
<b class="nc">&nbsp;            case &quot;pisces&quot;: return &quot;♓ &quot; + zodiac;</b>
<b class="fc">&nbsp;            default: return zodiac;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Updates the count of characters in the panel.
&nbsp;     */
&nbsp;    private void updateCount() {
<b class="pc">&nbsp;        if (sortPanel != null) {</b>
<b class="fc">&nbsp;            sortPanel.setCount(contentPanel.getComponentCount());</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Updates the view of the panel.
&nbsp;     */
&nbsp;    public void updateView() {
<b class="fc">&nbsp;        updateCount();</b>
<b class="fc">&nbsp;        contentPanel.repaint();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adds a character to the wishlist.
&nbsp;     */
&nbsp;    public interface AddToWishListListener {
&nbsp;        void onAdd(int characterId);
&nbsp;    }
&nbsp;} 
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-04-13 23:01</div>
</div>
</body>
</html>
